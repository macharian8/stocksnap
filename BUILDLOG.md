# BUILDLOG.md — StockSnap Build Issue Log

Chronological record of native build issues and their resolutions. Consult this before debugging build failures.

---

## [2026-02-21] react-native-reanimated folly header error

**ISSUE**: `npx expo run:ios` fails during pod compilation with folly header incompatibility errors from `react-native-reanimated`. The reanimated package's native code references folly C++ headers that are incompatible with the version bundled in React Native 0.81.5 on Intel Macs with Xcode 16.2.

**RESOLUTION**: Removed `react-native-reanimated` entirely. No application code imports it — it was only listed as a dependency and had its babel plugin in `babel.config.js`. Removed the `react-native-reanimated/plugin` entry from babel plugins array. Package should not be re-added unless the upstream incompatibility is fixed.

---

## [2026-02-21] NitroModules Swift compilation error (react-native-mmkv v4)

**ISSUE**: After removing reanimated, `pod install` fails with `Unable to find a specification for NitroModules depended upon by NitroMmkv`. The `react-native-mmkv` v4.x uses NitroModules (a Nitro-based native module system) which fails to compile on Intel Macs.

**RESOLUTION**: Downgraded `react-native-mmkv` from v4.1.2 to v2.12.2. API changes required:
- `import { createMMKV } from 'react-native-mmkv'` → `import { MMKV } from 'react-native-mmkv'`
- `createMMKV({ id: '...' })` → `new MMKV({ id: '...' })`
- `storage.remove(key)` → `storage.delete(key)`

Also removed `react-native-nitro-modules` which was only needed as a peer dependency of mmkv v3+.

---

## [2026-02-21] xcode-select pointing to wrong path

**ISSUE**: Build tools fail because `xcode-select` points to `/Library/Developer/CommandLineTools` instead of the full Xcode installation, which doesn't include iOS SDK or simulators.

**RESOLUTION**: Run:
```bash
sudo xcode-select -s /Applications/Xcode.app
```

---

## [2026-02-21] iOS Simulator runtime missing

**ISSUE**: `npx expo run:ios` reports "No iOS devices available in Simulator.app". `xcrun simctl list devices available` returns empty list. Xcode is installed but no simulator runtimes are downloaded.

**RESOLUTION**: Install iOS Simulator runtime via Xcode:
1. Open Xcode
2. Go to Settings (Cmd+,) > Platforms
3. Click "+" and download iOS runtime
4. Alternatively: `xcodebuild -downloadPlatform iOS` from terminal

---

## [2026-02-22] ios/ directory deleted for clean regeneration

**ISSUE**: After multiple dependency changes (removing reanimated, downgrading mmkv, removing nitro-modules), the `ios/` directory contained stale pod configurations and build artifacts.

**RESOLUTION**: Deleted `ios/` entirely with `rm -rf ios/`. It will be regenerated by `npx expo run:ios` on next build, picking up the current dependency state cleanly. This is the recommended approach after native dependency changes in Expo projects.

---
